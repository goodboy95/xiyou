<?php
//阻塞代码防止出现脏数据
$ininalock = $wjid . "_lock" . ".txt";
include("./ini/zsini.php");
if ($zsspd == 1) {
    $zbid = $npcc;
    $arr = explode("_", $npcc);
    $npcc = $arr[0];
    $npccid = $arr[1];
    $ymzb = $npcc;
    include("./ini/zbb_ini.php");
    $xj = ($iniFile->getItem('装备星级', $zbid));
    include("./wp/zbxx.php");//装备信息
    if ($xj == 0 || $xj == 1 || $xj == 2 || $xj == 3 || $xj == 4 || $xj == 5 || $xj == 6 || $xj == 7 || $xj == 8) {//铁星
        $zbidx = $npcc;//当前装备id赋值
//提供需要扣除的物品作为判读依据
        $wpdz1[] = "〖铁星升星符〗";//名字
        $wpdz2[] = 4;//物品分类
        $wpdz3[] = 314;//物品id
        $wpdz4[] = 1;//	需要扣除的量
        $wpdz5[] = 1;//	重量
//提供需要扣除的物品作为判读依据
//////////////////////////////////////////////////////
        $m = count($wpdz1, 0);
        $km = $m;
        $pdmzz = 2;
        $i = -1;
        $mm = $m - 1;
        for ($d = 0; $d < $km; $d++) {
            $i = $i + 1;
            $wpmz = $wpdz1[$i];
            $wwpfl = $wpdz2[$i];//物品分类
            $wpid = $wpdz3[$i];//物品id
            $wpkc = $wpdz4[$i];//	需要扣除的量
            if ($i + 1 == $m) {
                if ($wpmz == "银两") {
//数字转汉字
                    $yl = $wpkc;
                    include("./pz/ylts.php");
                    $wpts = $wpts . $ylxx . "银两";
                } elseif ($wpmz == "声望") {
//数字转汉字
                    $yl = $wpkc;
                    include("./pz/ylts.php");
                    include("./pz/ini_pzz013.php");
                    $wpts = $wpts . $ylxx . $swmz;
                } else {
                    $wpts = $wpts . $wpmz . "x" . $wpkc;
                }
            } else {
                if ($wpmz == "银两") {
//数字转汉字
                    $yl = $wpkc;
                    include("./pz/ylts.php");
                    $wpts = $wpts . $ylxx . "银两" . "，";
                } elseif ($wpmz == "声望") {
//数字转汉字
                    $yl = $wpkc;
                    include("./pz/ylts.php");
                    include("./pz/ini_pzz013.php");
                    $wpts = $wpts . $ylxx . $swmz . "，";
                } else {
                    $wpts = $wpts . $wpmz . "x" . $wpkc . "，";
                }
            }
            if ($wpmz == "银两") {
                $kcyl01 = $wpkc;
                include("./pz/ini_pzz01.php");//调用判断是否满足
            } elseif ($wpmz == "声望") {
                $kcyl01 = $wpkc;
                include("./pz/ini_pzz014.php");//调用判断是否满足
            } else {
                include("./pz/ini_pz01.php");//缓存位置
                include("./pz/ini_pzz03.php");//判断
            }
            if ($pdmz == 2) {
            } else {
                $pdmzz = 1;
            }
        }
        if ($pdmz == 2 && $pdmzz == 2) {
            include("./sql/mysql.php");//调用数据库连接 
            $kcrl = 0;//扣除容量初始
            $manzu1 = "";
            $i = -1;
            for ($d = 0; $d < $km; $d++) {
                $i = $i + 1;
                $wpmz = $wpdz1[$i];
                $wwpfl = $wpdz2[$i];//物品分类
                $wpid = $wpdz3[$i];//物品id
                $wpkc = $wpdz4[$i];//	需要扣除的量
                $wpzl = $wpdz5[$i];//	需要扣物品的重量
                if ($wpmz == "银两") {
//数字转汉字
                    $yl = $wpkc;
                    include("./pz/ylts.php");
                    $manzu1 = $manzu1 . "<p style='color: black'>失去：" . $ylxx . "银两</p>" . "<br>";
                    $kcyl01 = $wpkc;
                    include("./pz/ini_pzz012.php");//扣除
                } elseif ($wpmz == "声望") {
//数字转汉字
                    $yl = $wpkc;
                    include("./pz/ylts.php");
                    $manzu1 = $manzu1 . "<p style='color: black'>失去：" . $ylxx . $swmz . "</p>" . "<br>";
                    $kcyl01 = $wpkc;
                    include("./pz/ini_pzz015.php");//扣除
                } else {
                    $manzu1 = $manzu1 . "<p style='color: black'>失去：" . $wpmz . "x" . $wpkc . "</p>" . "<br>";
                    include("./pz/ini_pz01.php");//缓存位置
                    include("./pz/ini_pzz04.php");//扣除
                }
                if ($wpmz != "银两" || $wpmz != "声望") {
                    $kcrl = $wpkc * $wpzl + $kcrl;
                }
            }
//背包容量变更
            include("./pz/ini_pzz05.php");
//这里是升级装备代码	
            $npcc = $zbidx;
            echo "<p style='color: black'>恭喜你！升星" . $wp1 . "成功</p>" . "<br>";
            include("./pz/ini_pzz017.php");//升星
//	输出满足提示语言
            echo $manzu1;
        } else {
            $bumanzu = "对不起！升星" . $wp1 . "需要：" . $wpts;//不满足提示语	
//	输出不满足提示语言
            echo "<p style='color: red'>" . $bumanzu . "</p>" . "<br>";
        }
    } elseif ($xj == 9 || $xj == 10 || $xj == 11 || $xj == 12 || $xj == 13 || $xj == 14 || $xj == 15 || $xj == 16 || $xj == 17) {//铜星
        $zbidx = $npcc;//当前装备id赋值
//提供需要扣除的物品作为判读依据
        $wpdz1[] = "〖铜星升星符〗";//名字
        $wpdz2[] = 4;//物品分类
        $wpdz3[] = 315;//物品id
        $wpdz4[] = 1;//	需要扣除的量
        $wpdz5[] = 1;//	重量
//提供需要扣除的物品作为判读依据
//////////////////////////////////////////////////////
        $m = count($wpdz1, 0);
        $km = $m;
        $pdmzz = 2;
        $i = -1;
        $mm = $m - 1;
        for ($d = 0; $d < $km; $d++) {
            $i = $i + 1;
            $wpmz = $wpdz1[$i];
            $wwpfl = $wpdz2[$i];//物品分类
            $wpid = $wpdz3[$i];//物品id
            $wpkc = $wpdz4[$i];//	需要扣除的量
            if ($i + 1 == $m) {
                if ($wpmz == "银两") {
//数字转汉字
                    $yl = $wpkc;
                    include("./pz/ylts.php");
                    $wpts = $wpts . $ylxx . "银两";
                } elseif ($wpmz == "声望") {
//数字转汉字
                    $yl = $wpkc;
                    include("./pz/ylts.php");
                    include("./pz/ini_pzz013.php");
                    $wpts = $wpts . $ylxx . $swmz;
                } else {
                    $wpts = $wpts . $wpmz . "x" . $wpkc;
                }
            } else {
                if ($wpmz == "银两") {
//数字转汉字
                    $yl = $wpkc;
                    include("./pz/ylts.php");
                    $wpts = $wpts . $ylxx . "银两" . "，";
                } elseif ($wpmz == "声望") {
//数字转汉字
                    $yl = $wpkc;
                    include("./pz/ylts.php");
                    include("./pz/ini_pzz013.php");
                    $wpts = $wpts . $ylxx . $swmz . "，";
                } else {
                    $wpts = $wpts . $wpmz . "x" . $wpkc . "，";
                }
            }
            if ($wpmz == "银两") {
                $kcyl01 = $wpkc;
                include("./pz/ini_pzz01.php");//调用判断是否满足
            } elseif ($wpmz == "声望") {
                $kcyl01 = $wpkc;
                include("./pz/ini_pzz014.php");//调用判断是否满足
            } else {
                include("./pz/ini_pz01.php");//缓存位置
                include("./pz/ini_pzz03.php");//判断
            }
            if ($pdmz == 2) {
            } else {
                $pdmzz = 1;
            }
        }
        if ($pdmz == 2 && $pdmzz == 2) {
            include("./sql/mysql.php");//调用数据库连接 
            $kcrl = 0;//扣除容量初始
            $manzu1 = "";
            $i = -1;
            for ($d = 0; $d < $km; $d++) {
                $i = $i + 1;
                $wpmz = $wpdz1[$i];
                $wwpfl = $wpdz2[$i];//物品分类
                $wpid = $wpdz3[$i];//物品id
                $wpkc = $wpdz4[$i];//	需要扣除的量
                $wpzl = $wpdz5[$i];//	需要扣物品的重量
                if ($wpmz == "银两") {
//数字转汉字
                    $yl = $wpkc;
                    include("./pz/ylts.php");
                    $manzu1 = $manzu1 . "<p style='color: black'>失去：" . $ylxx . "银两</p>" . "<br>";
                    $kcyl01 = $wpkc;
                    include("./pz/ini_pzz012.php");//扣除
                } elseif ($wpmz == "声望") {
//数字转汉字
                    $yl = $wpkc;
                    include("./pz/ylts.php");
                    $manzu1 = $manzu1 . "<p style='color: black'>失去：" . $ylxx . $swmz . "</p>" . "<br>";
                    $kcyl01 = $wpkc;
                    include("./pz/ini_pzz015.php");//扣除
                } else {
                    $manzu1 = $manzu1 . "<p style='color: black'>失去：" . $wpmz . "x" . $wpkc . "</p>" . "<br>";
                    include("./pz/ini_pz01.php");//缓存位置
                    include("./pz/ini_pzz04.php");//扣除
                }
                if ($wpmz != "银两" || $wpmz != "声望") {
                    $kcrl = $wpkc * $wpzl + $kcrl;
                }
            }
//背包容量变更
            include("./pz/ini_pzz05.php");
//这里是升级装备代码	
            $npcc = $zbidx;
            echo "<p style='color: black'>恭喜你！升星" . $wp1 . "成功</p>" . "<br>";
            include("./pz/ini_pzz017.php");//升星
//	输出满足提示语言
            echo $manzu1;
        } else {
            $bumanzu = "对不起！升星" . $wp1 . "需要：" . $wpts;//不满足提示语	
//	输出不满足提示语言
            echo "<p style='color: red'>" . $bumanzu . "</p>" . "<br>";
        }
    } elseif ($xj == 18 || $xj == 19 || $xj == 20 || $xj == 21 || $xj == 22 || $xj == 23 || $xj == 24 || $xj == 25 || $xj == 26) {//银星
        $zbidx = $npcc;//当前装备id赋值
//提供需要扣除的物品作为判读依据
        $wpdz1[] = "〖银星升星符〗";//名字
        $wpdz2[] = 4;//物品分类
        $wpdz3[] = 316;//物品id
        $wpdz4[] = 1;//	需要扣除的量
        $wpdz5[] = 1;//	重量
//提供需要扣除的物品作为判读依据
//////////////////////////////////////////////////////
        $m = count($wpdz1, 0);
        $km = $m;
        $pdmzz = 2;
        $i = -1;
        $mm = $m - 1;
        for ($d = 0; $d < $km; $d++) {
            $i = $i + 1;
            $wpmz = $wpdz1[$i];
            $wwpfl = $wpdz2[$i];//物品分类
            $wpid = $wpdz3[$i];//物品id
            $wpkc = $wpdz4[$i];//	需要扣除的量
            if ($i + 1 == $m) {
                if ($wpmz == "银两") {
//数字转汉字
                    $yl = $wpkc;
                    include("./pz/ylts.php");
                    $wpts = $wpts . $ylxx . "银两";
                } elseif ($wpmz == "声望") {
//数字转汉字
                    $yl = $wpkc;
                    include("./pz/ylts.php");
                    include("./pz/ini_pzz013.php");
                    $wpts = $wpts . $ylxx . $swmz;
                } else {
                    $wpts = $wpts . $wpmz . "x" . $wpkc;
                }
            } else {
                if ($wpmz == "银两") {
//数字转汉字
                    $yl = $wpkc;
                    include("./pz/ylts.php");
                    $wpts = $wpts . $ylxx . "银两" . "，";
                } elseif ($wpmz == "声望") {
//数字转汉字
                    $yl = $wpkc;
                    include("./pz/ylts.php");
                    include("./pz/ini_pzz013.php");
                    $wpts = $wpts . $ylxx . $swmz . "，";
                } else {
                    $wpts = $wpts . $wpmz . "x" . $wpkc . "，";
                }
            }
            if ($wpmz == "银两") {
                $kcyl01 = $wpkc;
                include("./pz/ini_pzz01.php");//调用判断是否满足
            } elseif ($wpmz == "声望") {
                $kcyl01 = $wpkc;
                include("./pz/ini_pzz014.php");//调用判断是否满足
            } else {
                include("./pz/ini_pz01.php");//缓存位置
                include("./pz/ini_pzz03.php");//判断
            }
            if ($pdmz == 2) {
            } else {
                $pdmzz = 1;
            }
        }
        if ($pdmz == 2 && $pdmzz == 2) {
            include("./sql/mysql.php");//调用数据库连接 
            $kcrl = 0;//扣除容量初始
            $manzu1 = "";
            $i = -1;
            for ($d = 0; $d < $km; $d++) {
                $i = $i + 1;
                $wpmz = $wpdz1[$i];
                $wwpfl = $wpdz2[$i];//物品分类
                $wpid = $wpdz3[$i];//物品id
                $wpkc = $wpdz4[$i];//	需要扣除的量
                $wpzl = $wpdz5[$i];//	需要扣物品的重量
                if ($wpmz == "银两") {
//数字转汉字
                    $yl = $wpkc;
                    include("./pz/ylts.php");
                    $manzu1 = $manzu1 . "<p style='color: black'>失去：" . $ylxx . "银两</p>" . "<br>";
                    $kcyl01 = $wpkc;
                    include("./pz/ini_pzz012.php");//扣除
                } elseif ($wpmz == "声望") {
//数字转汉字
                    $yl = $wpkc;
                    include("./pz/ylts.php");
                    $manzu1 = $manzu1 . "<p style='color: black'>失去：" . $ylxx . $swmz . "</p>" . "<br>";
                    $kcyl01 = $wpkc;
                    include("./pz/ini_pzz015.php");//扣除
                } else {
                    $manzu1 = $manzu1 . "<p style='color: black'>失去：" . $wpmz . "x" . $wpkc . "</p>" . "<br>";
                    include("./pz/ini_pz01.php");//缓存位置
                    include("./pz/ini_pzz04.php");//扣除
                }
                if ($wpmz != "银两" || $wpmz != "声望") {
                    $kcrl = $wpkc * $wpzl + $kcrl;
                }
            }
//背包容量变更
            include("./pz/ini_pzz05.php");
//这里是升级装备代码	
            $npcc = $zbidx;
            echo "<p style='color: black'>恭喜你！升星" . $wp1 . "成功</p>" . "<br>";
            include("./pz/ini_pzz017.php");//升星
//	输出满足提示语言
            echo $manzu1;
        } else {
            $bumanzu = "对不起！升星" . $wp1 . "需要：" . $wpts;//不满足提示语	
//	输出不满足提示语言
            echo "<p style='color: red'>" . $bumanzu . "</p>" . "<br>";
        }
    } elseif ($xj == 27 || $xj == 28 || $xj == 29 || $xj == 30 || $xj == 31 || $xj == 32 || $xj == 33 || $xj == 34 || $xj == 35) {//金星
        $zbidx = $npcc;//当前装备id赋值
//提供需要扣除的物品作为判读依据
        $wpdz1[] = "〖金星升星符〗";//名字
        $wpdz2[] = 4;//物品分类
        $wpdz3[] = 317;//物品id
        $wpdz4[] = 1;//	需要扣除的量
        $wpdz5[] = 1;//	重量
//提供需要扣除的物品作为判读依据
//////////////////////////////////////////////////////
        $m = count($wpdz1, 0);
        $km = $m;
        $pdmzz = 2;
        $i = -1;
        $mm = $m - 1;
        for ($d = 0; $d < $km; $d++) {
            $i = $i + 1;
            $wpmz = $wpdz1[$i];
            $wwpfl = $wpdz2[$i];//物品分类
            $wpid = $wpdz3[$i];//物品id
            $wpkc = $wpdz4[$i];//	需要扣除的量
            if ($i + 1 == $m) {
                if ($wpmz == "银两") {
//数字转汉字
                    $yl = $wpkc;
                    include("./pz/ylts.php");
                    $wpts = $wpts . $ylxx . "银两";
                } elseif ($wpmz == "声望") {
//数字转汉字
                    $yl = $wpkc;
                    include("./pz/ylts.php");
                    include("./pz/ini_pzz013.php");
                    $wpts = $wpts . $ylxx . $swmz;
                } else {
                    $wpts = $wpts . $wpmz . "x" . $wpkc;
                }
            } else {
                if ($wpmz == "银两") {
//数字转汉字
                    $yl = $wpkc;
                    include("./pz/ylts.php");
                    $wpts = $wpts . $ylxx . "银两" . "，";
                } elseif ($wpmz == "声望") {
//数字转汉字
                    $yl = $wpkc;
                    include("./pz/ylts.php");
                    include("./pz/ini_pzz013.php");
                    $wpts = $wpts . $ylxx . $swmz . "，";
                } else {
                    $wpts = $wpts . $wpmz . "x" . $wpkc . "，";
                }
            }
            if ($wpmz == "银两") {
                $kcyl01 = $wpkc;
                include("./pz/ini_pzz01.php");//调用判断是否满足
            } elseif ($wpmz == "声望") {
                $kcyl01 = $wpkc;
                include("./pz/ini_pzz014.php");//调用判断是否满足
            } else {
                include("./pz/ini_pz01.php");//缓存位置
                include("./pz/ini_pzz03.php");//判断
            }
            if ($pdmz == 2) {
            } else {
                $pdmzz = 1;
            }
        }
        if ($pdmz == 2 && $pdmzz == 2) {
            include("./sql/mysql.php");//调用数据库连接 
            $kcrl = 0;//扣除容量初始
            $manzu1 = "";
            $i = -1;
            for ($d = 0; $d < $km; $d++) {
                $i = $i + 1;
                $wpmz = $wpdz1[$i];
                $wwpfl = $wpdz2[$i];//物品分类
                $wpid = $wpdz3[$i];//物品id
                $wpkc = $wpdz4[$i];//	需要扣除的量
                $wpzl = $wpdz5[$i];//	需要扣物品的重量
                if ($wpmz == "银两") {
//数字转汉字
                    $yl = $wpkc;
                    include("./pz/ylts.php");
                    $manzu1 = $manzu1 . "<p style='color: black'>失去：" . $ylxx . "银两</p>" . "<br>";
                    $kcyl01 = $wpkc;
                    include("./pz/ini_pzz012.php");//扣除
                } elseif ($wpmz == "声望") {
//数字转汉字
                    $yl = $wpkc;
                    include("./pz/ylts.php");
                    $manzu1 = $manzu1 . "<p style='color: black'>失去：" . $ylxx . $swmz . "</p>" . "<br>";
                    $kcyl01 = $wpkc;
                    include("./pz/ini_pzz015.php");//扣除
                } else {
                    $manzu1 = $manzu1 . "<p style='color: black'>失去：" . $wpmz . "x" . $wpkc . "</p>" . "<br>";
                    include("./pz/ini_pz01.php");//缓存位置
                    include("./pz/ini_pzz04.php");//扣除
                }
                if ($wpmz != "银两" || $wpmz != "声望") {
                    $kcrl = $wpkc * $wpzl + $kcrl;
                }
            }
//背包容量变更
            include("./pz/ini_pzz05.php");
//这里是升级装备代码	
            $npcc = $zbidx;
            echo "<p style='color: black'>恭喜你！升星" . $wp1 . "成功</p>" . "<br>";
            include("./pz/ini_pzz017.php");//升星
//	输出满足提示语言
            echo $manzu1;
        } else {
            $bumanzu = "对不起！升星" . $wp1 . "需要：" . $wpts;//不满足提示语	
//	输出不满足提示语言
            echo "<p style='color: red'>" . $bumanzu . "</p>" . "<br>";
        }
    } elseif ($xj == 36 || $xj == 37 || $xj == 38 || $xj == 39 || $xj == 40 || $xj == 41 || $xj == 42 || $xj == 43 || $xj == 44) {//钻星
        $zbidx = $npcc;//当前装备id赋值
//提供需要扣除的物品作为判读依据
        $wpdz1[] = "〖钻星升星符〗";//名字
        $wpdz2[] = 4;//物品分类
        $wpdz3[] = 318;//物品id
        $wpdz4[] = 1;//	需要扣除的量
        $wpdz5[] = 1;//	重量
//提供需要扣除的物品作为判读依据
//////////////////////////////////////////////////////
        $m = count($wpdz1, 0);
        $km = $m;
        $pdmzz = 2;
        $i = -1;
        $mm = $m - 1;
        for ($d = 0; $d < $km; $d++) {
            $i = $i + 1;
            $wpmz = $wpdz1[$i];
            $wwpfl = $wpdz2[$i];//物品分类
            $wpid = $wpdz3[$i];//物品id
            $wpkc = $wpdz4[$i];//	需要扣除的量
            if ($i + 1 == $m) {
                if ($wpmz == "银两") {
//数字转汉字
                    $yl = $wpkc;
                    include("./pz/ylts.php");
                    $wpts = $wpts . $ylxx . "银两";
                } elseif ($wpmz == "声望") {
//数字转汉字
                    $yl = $wpkc;
                    include("./pz/ylts.php");
                    include("./pz/ini_pzz013.php");
                    $wpts = $wpts . $ylxx . $swmz;
                } else {
                    $wpts = $wpts . $wpmz . "x" . $wpkc;
                }
            } else {
                if ($wpmz == "银两") {
//数字转汉字
                    $yl = $wpkc;
                    include("./pz/ylts.php");
                    $wpts = $wpts . $ylxx . "银两" . "，";
                } elseif ($wpmz == "声望") {
//数字转汉字
                    $yl = $wpkc;
                    include("./pz/ylts.php");
                    include("./pz/ini_pzz013.php");
                    $wpts = $wpts . $ylxx . $swmz . "，";
                } else {
                    $wpts = $wpts . $wpmz . "x" . $wpkc . "，";
                }
            }
            if ($wpmz == "银两") {
                $kcyl01 = $wpkc;
                include("./pz/ini_pzz01.php");//调用判断是否满足
            } elseif ($wpmz == "声望") {
                $kcyl01 = $wpkc;
                include("./pz/ini_pzz014.php");//调用判断是否满足
            } else {
                include("./pz/ini_pz01.php");//缓存位置
                include("./pz/ini_pzz03.php");//判断
            }
            if ($pdmz == 2) {
            } else {
                $pdmzz = 1;
            }
        }
        if ($pdmz == 2 && $pdmzz == 2) {
            include("./sql/mysql.php");//调用数据库连接 
            $kcrl = 0;//扣除容量初始
            $manzu1 = "";
            $i = -1;
            for ($d = 0; $d < $km; $d++) {
                $i = $i + 1;
                $wpmz = $wpdz1[$i];
                $wwpfl = $wpdz2[$i];//物品分类
                $wpid = $wpdz3[$i];//物品id
                $wpkc = $wpdz4[$i];//	需要扣除的量
                $wpzl = $wpdz5[$i];//	需要扣物品的重量
                if ($wpmz == "银两") {
//数字转汉字
                    $yl = $wpkc;
                    include("./pz/ylts.php");
                    $manzu1 = $manzu1 . "<p style='color: black'>失去：" . $ylxx . "银两</p>" . "<br>";
                    $kcyl01 = $wpkc;
                    include("./pz/ini_pzz012.php");//扣除
                } elseif ($wpmz == "声望") {
//数字转汉字
                    $yl = $wpkc;
                    include("./pz/ylts.php");
                    $manzu1 = $manzu1 . "<p style='color: black'>失去：" . $ylxx . $swmz . "</p>" . "<br>";
                    $kcyl01 = $wpkc;
                    include("./pz/ini_pzz015.php");//扣除
                } else {
                    $manzu1 = $manzu1 . "<p style='color: black'>失去：" . $wpmz . "x" . $wpkc . "</p>" . "<br>";
                    include("./pz/ini_pz01.php");//缓存位置
                    include("./pz/ini_pzz04.php");//扣除
                }
                if ($wpmz != "银两" || $wpmz != "声望") {
                    $kcrl = $wpkc * $wpzl + $kcrl;
                }
            }
//背包容量变更
            include("./pz/ini_pzz05.php");
//这里是升级装备代码	
            $npcc = $zbidx;
            echo "<p style='color: black'>恭喜你！升星" . $wp1 . "成功</p>" . "<br>";
            include("./pz/ini_pzz017.php");//升星
//	输出满足提示语言
            echo $manzu1;
        } else {
            $bumanzu = "对不起！升星" . $wp1 . "需要：" . $wpts;//不满足提示语	
//	输出不满足提示语言
            echo "<p style='color: red'>" . $bumanzu . "</p>" . "<br>";
        }
    } elseif ($xj == 45 || $xj == 46 || $xj == 47 || $xj == 48 || $xj == 49 || $xj == 50 || $xj == 51 || $xj == 52 || $xj == 53) {//陨星
        $zbidx = $npcc;//当前装备id赋值
//提供需要扣除的物品作为判读依据
        $wpdz1[] = "〖陨星升星符〗";//名字
        $wpdz2[] = 4;//物品分类
        $wpdz3[] = 319;//物品id
        $wpdz4[] = 1;//	需要扣除的量
        $wpdz5[] = 1;//	重量
//提供需要扣除的物品作为判读依据
//////////////////////////////////////////////////////
        $m = count($wpdz1, 0);
        $km = $m;
        $pdmzz = 2;
        $i = -1;
        $mm = $m - 1;
        for ($d = 0; $d < $km; $d++) {
            $i = $i + 1;
            $wpmz = $wpdz1[$i];
            $wwpfl = $wpdz2[$i];//物品分类
            $wpid = $wpdz3[$i];//物品id
            $wpkc = $wpdz4[$i];//	需要扣除的量
            if ($i + 1 == $m) {
                if ($wpmz == "银两") {
//数字转汉字
                    $yl = $wpkc;
                    include("./pz/ylts.php");
                    $wpts = $wpts . $ylxx . "银两";
                } elseif ($wpmz == "声望") {
//数字转汉字
                    $yl = $wpkc;
                    include("./pz/ylts.php");
                    include("./pz/ini_pzz013.php");
                    $wpts = $wpts . $ylxx . $swmz;
                } else {
                    $wpts = $wpts . $wpmz . "x" . $wpkc;
                }
            } else {
                if ($wpmz == "银两") {
//数字转汉字
                    $yl = $wpkc;
                    include("./pz/ylts.php");
                    $wpts = $wpts . $ylxx . "银两" . "，";
                } elseif ($wpmz == "声望") {
//数字转汉字
                    $yl = $wpkc;
                    include("./pz/ylts.php");
                    include("./pz/ini_pzz013.php");
                    $wpts = $wpts . $ylxx . $swmz . "，";
                } else {
                    $wpts = $wpts . $wpmz . "x" . $wpkc . "，";
                }
            }
            if ($wpmz == "银两") {
                $kcyl01 = $wpkc;
                include("./pz/ini_pzz01.php");//调用判断是否满足
            } elseif ($wpmz == "声望") {
                $kcyl01 = $wpkc;
                include("./pz/ini_pzz014.php");//调用判断是否满足
            } else {
                include("./pz/ini_pz01.php");//缓存位置
                include("./pz/ini_pzz03.php");//判断
            }
            if ($pdmz == 2) {
            } else {
                $pdmzz = 1;
            }
        }
        if ($pdmz == 2 && $pdmzz == 2) {
            include("./sql/mysql.php");//调用数据库连接 
            $kcrl = 0;//扣除容量初始
            $manzu1 = "";
            $i = -1;
            for ($d = 0; $d < $km; $d++) {
                $i = $i + 1;
                $wpmz = $wpdz1[$i];
                $wwpfl = $wpdz2[$i];//物品分类
                $wpid = $wpdz3[$i];//物品id
                $wpkc = $wpdz4[$i];//	需要扣除的量
                $wpzl = $wpdz5[$i];//	需要扣物品的重量
                if ($wpmz == "银两") {
//数字转汉字
                    $yl = $wpkc;
                    include("./pz/ylts.php");
                    $manzu1 = $manzu1 . "<p style='color: black'>失去：" . $ylxx . "银两</p>" . "<br>";
                    $kcyl01 = $wpkc;
                    include("./pz/ini_pzz012.php");//扣除
                } elseif ($wpmz == "声望") {
//数字转汉字
                    $yl = $wpkc;
                    include("./pz/ylts.php");
                    $manzu1 = $manzu1 . "<p style='color: black'>失去：" . $ylxx . $swmz . "</p>" . "<br>";
                    $kcyl01 = $wpkc;
                    include("./pz/ini_pzz015.php");//扣除
                } else {
                    $manzu1 = $manzu1 . "<p style='color: black'>失去：" . $wpmz . "x" . $wpkc . "</p>" . "<br>";
                    include("./pz/ini_pz01.php");//缓存位置
                    include("./pz/ini_pzz04.php");//扣除
                }
                if ($wpmz != "银两" || $wpmz != "声望") {
                    $kcrl = $wpkc * $wpzl + $kcrl;
                }
            }
//背包容量变更
            include("./pz/ini_pzz05.php");
//这里是升级装备代码	
            $npcc = $zbidx;
            echo "<p style='color: black'>恭喜你！升星" . $wp1 . "成功</p>" . "<br>";
            include("./pz/ini_pzz017.php");//升星
//	输出满足提示语言
            echo $manzu1;
        } else {
            $bumanzu = "对不起！升星" . $wp1 . "需要：" . $wpts;//不满足提示语	
//	输出不满足提示语言
            echo "<p style='color: red'>" . $bumanzu . "</p>" . "<br>";
        }
    } elseif ($xj == 54 || $xj == 55 || $xj == 56 || $xj == 57 || $xj == 58 || $xj == 59 || $xj == 60 || $xj == 61 || $xj == 62) {//仙の陨星
        $zbidx = $npcc;//当前装备id赋值
//提供需要扣除的物品作为判读依据
        $wpdz1[] = "〖仙の陨升星符〗";//名字
        $wpdz2[] = 4;//物品分类
        $wpdz3[] = 824;//物品id
        $wpdz4[] = 1;//	需要扣除的量
        $wpdz5[] = 1;//	重量
//提供需要扣除的物品作为判读依据
//////////////////////////////////////////////////////
        $m = count($wpdz1, 0);
        $km = $m;
        $pdmzz = 2;
        $i = -1;
        $mm = $m - 1;
        for ($d = 0; $d < $km; $d++) {
            $i = $i + 1;
            $wpmz = $wpdz1[$i];
            $wwpfl = $wpdz2[$i];//物品分类
            $wpid = $wpdz3[$i];//物品id
            $wpkc = $wpdz4[$i];//	需要扣除的量
            if ($i + 1 == $m) {
                if ($wpmz == "银两") {
//数字转汉字
                    $yl = $wpkc;
                    include("./pz/ylts.php");
                    $wpts = $wpts . $ylxx . "银两";
                } elseif ($wpmz == "声望") {
//数字转汉字
                    $yl = $wpkc;
                    include("./pz/ylts.php");
                    include("./pz/ini_pzz013.php");
                    $wpts = $wpts . $ylxx . $swmz;
                } else {
                    $wpts = $wpts . $wpmz . "x" . $wpkc;
                }
            } else {
                if ($wpmz == "银两") {
//数字转汉字
                    $yl = $wpkc;
                    include("./pz/ylts.php");
                    $wpts = $wpts . $ylxx . "银两" . "，";
                } elseif ($wpmz == "声望") {
//数字转汉字
                    $yl = $wpkc;
                    include("./pz/ylts.php");
                    include("./pz/ini_pzz013.php");
                    $wpts = $wpts . $ylxx . $swmz . "，";
                } else {
                    $wpts = $wpts . $wpmz . "x" . $wpkc . "，";
                }
            }
            if ($wpmz == "银两") {
                $kcyl01 = $wpkc;
                include("./pz/ini_pzz01.php");//调用判断是否满足
            } elseif ($wpmz == "声望") {
                $kcyl01 = $wpkc;
                include("./pz/ini_pzz014.php");//调用判断是否满足
            } else {
                include("./pz/ini_pz01.php");//缓存位置
                include("./pz/ini_pzz03.php");//判断
            }
            if ($pdmz == 2) {
            } else {
                $pdmzz = 1;
            }
        }
        if ($pdmz == 2 && $pdmzz == 2) {
            include("./sql/mysql.php");//调用数据库连接 
            $kcrl = 0;//扣除容量初始
            $manzu1 = "";
            $i = -1;
            for ($d = 0; $d < $km; $d++) {
                $i = $i + 1;
                $wpmz = $wpdz1[$i];
                $wwpfl = $wpdz2[$i];//物品分类
                $wpid = $wpdz3[$i];//物品id
                $wpkc = $wpdz4[$i];//	需要扣除的量
                $wpzl = $wpdz5[$i];//	需要扣物品的重量
                if ($wpmz == "银两") {
//数字转汉字
                    $yl = $wpkc;
                    include("./pz/ylts.php");
                    $manzu1 = $manzu1 . "<p style='color: black'>失去：" . $ylxx . "银两</p>" . "<br>";
                    $kcyl01 = $wpkc;
                    include("./pz/ini_pzz012.php");//扣除
                } elseif ($wpmz == "声望") {
//数字转汉字
                    $yl = $wpkc;
                    include("./pz/ylts.php");
                    $manzu1 = $manzu1 . "<p style='color: black'>失去：" . $ylxx . $swmz . "</p>" . "<br>";
                    $kcyl01 = $wpkc;
                    include("./pz/ini_pzz015.php");//扣除
                } else {
                    $manzu1 = $manzu1 . "<p style='color: black'>失去：" . $wpmz . "x" . $wpkc . "</p>" . "<br>";
                    include("./pz/ini_pz01.php");//缓存位置
                    include("./pz/ini_pzz04.php");//扣除
                }
                if ($wpmz != "银两" || $wpmz != "声望") {
                    $kcrl = $wpkc * $wpzl + $kcrl;
                }
            }
//背包容量变更
            include("./pz/ini_pzz05.php");
//这里是升级装备代码	
            $npcc = $zbidx;
            echo "<p style='color: black'>恭喜你！升星" . $wp1 . "成功</p>" . "<br>";
            include("./pz/ini_pzz017.php");//升星
//	输出满足提示语言
            echo $manzu1;
        } else {
            $bumanzu = "对不起！升星" . $wp1 . "需要：" . $wpts;//不满足提示语	
//	输出不满足提示语言
            echo "<p style='color: red'>" . $bumanzu . "</p>" . "<br>";
        }
    } elseif ($xj == 63 || $xj == 64 || $xj == 65 || $xj == 66 || $xj == 67 || $xj == 68 || $xj == 69 || $xj == 70 || $xj == 71) {//神の陨星
        $zbidx = $npcc;//当前装备id赋值
//提供需要扣除的物品作为判读依据
        $wpdz1[] = "〖神の陨升星符〗";//名字
        $wpdz2[] = 4;//物品分类
        $wpdz3[] = 1011;//物品id
        $wpdz4[] = 1;//	需要扣除的量
        $wpdz5[] = 1;//	重量
//提供需要扣除的物品作为判读依据
//////////////////////////////////////////////////////
        $m = count($wpdz1, 0);
        $km = $m;
        $pdmzz = 2;
        $i = -1;
        $mm = $m - 1;
        for ($d = 0; $d < $km; $d++) {
            $i = $i + 1;
            $wpmz = $wpdz1[$i];
            $wwpfl = $wpdz2[$i];//物品分类
            $wpid = $wpdz3[$i];//物品id
            $wpkc = $wpdz4[$i];//	需要扣除的量
            if ($i + 1 == $m) {
                if ($wpmz == "银两") {
//数字转汉字
                    $yl = $wpkc;
                    include("./pz/ylts.php");
                    $wpts = $wpts . $ylxx . "银两";
                } elseif ($wpmz == "声望") {
//数字转汉字
                    $yl = $wpkc;
                    include("./pz/ylts.php");
                    include("./pz/ini_pzz013.php");
                    $wpts = $wpts . $ylxx . $swmz;
                } else {
                    $wpts = $wpts . $wpmz . "x" . $wpkc;
                }
            } else {
                if ($wpmz == "银两") {
//数字转汉字
                    $yl = $wpkc;
                    include("./pz/ylts.php");
                    $wpts = $wpts . $ylxx . "银两" . "，";
                } elseif ($wpmz == "声望") {
//数字转汉字
                    $yl = $wpkc;
                    include("./pz/ylts.php");
                    include("./pz/ini_pzz013.php");
                    $wpts = $wpts . $ylxx . $swmz . "，";
                } else {
                    $wpts = $wpts . $wpmz . "x" . $wpkc . "，";
                }
            }
            if ($wpmz == "银两") {
                $kcyl01 = $wpkc;
                include("./pz/ini_pzz01.php");//调用判断是否满足
            } elseif ($wpmz == "声望") {
                $kcyl01 = $wpkc;
                include("./pz/ini_pzz014.php");//调用判断是否满足
            } else {
                include("./pz/ini_pz01.php");//缓存位置
                include("./pz/ini_pzz03.php");//判断
            }
            if ($pdmz == 2) {
            } else {
                $pdmzz = 1;
            }
        }
        if ($pdmz == 2 && $pdmzz == 2) {
            include("./sql/mysql.php");//调用数据库连接 
            $kcrl = 0;//扣除容量初始
            $manzu1 = "";
            $i = -1;
            for ($d = 0; $d < $km; $d++) {
                $i = $i + 1;
                $wpmz = $wpdz1[$i];
                $wwpfl = $wpdz2[$i];//物品分类
                $wpid = $wpdz3[$i];//物品id
                $wpkc = $wpdz4[$i];//	需要扣除的量
                $wpzl = $wpdz5[$i];//	需要扣物品的重量
                if ($wpmz == "银两") {
//数字转汉字
                    $yl = $wpkc;
                    include("./pz/ylts.php");
                    $manzu1 = $manzu1 . "<p style='color: black'>失去：" . $ylxx . "银两</p>" . "<br>";
                    $kcyl01 = $wpkc;
                    include("./pz/ini_pzz012.php");//扣除
                } elseif ($wpmz == "声望") {
//数字转汉字
                    $yl = $wpkc;
                    include("./pz/ylts.php");
                    $manzu1 = $manzu1 . "<p style='color: black'>失去：" . $ylxx . $swmz . "</p>" . "<br>";
                    $kcyl01 = $wpkc;
                    include("./pz/ini_pzz015.php");//扣除
                } else {
                    $manzu1 = $manzu1 . "<p style='color: black'>失去：" . $wpmz . "x" . $wpkc . "</p>" . "<br>";
                    include("./pz/ini_pz01.php");//缓存位置
                    include("./pz/ini_pzz04.php");//扣除
                }
                if ($wpmz != "银两" || $wpmz != "声望") {
                    $kcrl = $wpkc * $wpzl + $kcrl;
                }
            }
//背包容量变更
            include("./pz/ini_pzz05.php");
//这里是升级装备代码	
            $npcc = $zbidx;
            echo "<p style='color: black'>恭喜你！升星" . $wp1 . "成功</p>" . "<br>";
            include("./pz/ini_pzz017.php");//升星
//	输出满足提示语言
            echo $manzu1;
        } else {
            $bumanzu = "对不起！升星" . $wp1 . "需要：" . $wpts;//不满足提示语	
//	输出不满足提示语言
            echo "<p style='color: red'>" . $bumanzu . "</p>" . "<br>";
        }
    } else {
        echo "<p style='color: black'>对不起！" . $wp1 . "已达到目前星级最高境界了！！</p>" . "<br>";
    }
    include("./wj/zbpost.php");
    echo "----------------------" . "<br>";
//cmd及超链接值
    include("fhgame.php");
}
//解锁当前使用的ini
include("./ini/jsini.php");
//解锁当前使用的ini
